const elOverlay=document.querySelector(".overlay"),elHamburgeMenubtn=document.querySelector(".header__hamburger"),elHeader=document.querySelector("header"),elBody=document.querySelector("body"),elHeaderBtn=elHeader.querySelector(".header__btn"),elHeaderTabletBtn=elHeader.querySelector(".header__btn--active");let isActive="Barchasi";const elHeaderOrderModal=elHeader.querySelector(".header__order-modal"),elHeaderOrderSuccessModal=elHeader.querySelector(".header__order-success"),elHeaderOrderSuccessModalBtn=elHeader.querySelector(".header__order-success-btn"),elForm=elHeader.querySelector(".header__order-form"),elFormInputName=elForm.querySelector("#userName"),elFormInputTel=elForm.querySelector("#userNumber"),elFormSelect=elForm.querySelector("#userCategory"),elFormDecrementButton=elForm.querySelector(".header__order-count-decrement");let elFormProductCount=elForm.querySelector("#userProductCount");const elFormIncrementButton=elForm.querySelector(".header__order-count-increment"),elCategoryLinksList=document.querySelector(".products_linsk-list"),elProducts=document.querySelector(".products__main-box"),elDiscountTitle=document.querySelector(".discount_title"),elDiscounts=document.querySelector(".discount_main-box"),elInterestingWrap=document.querySelector(".interesting__main-wrap"),elInterestingForm=document.querySelector(".interesting__form"),elFormInterestingInput=elInterestingForm.querySelector(".interesting__input");let elFormInterestingError=document.querySelector(".interesting__error");const elInterestingSuccess=document.querySelector(".interesting__success"),elTemplate=document.querySelector("#categories").content,elProductsTemplate=document.querySelector("#products").content,elDiscountProductsTemplate=document.querySelector("#discounts").content,elAddressTemplate=document.querySelector("#address").content,discountFragment=document.createDocumentFragment(),addressWrapper=document.querySelector(".addressWrapper"),heroCarouselWrapper=document.querySelector(".heroCarouselWrapper"),elLoaderTxt=document.querySelectorAll(".loader-text"),elSecondAppBox=document.querySelector(".aapp"),cancelSecondApp=elSecondAppBox.querySelector(".btn-cancel"),trySecondApp=elSecondAppBox.querySelector(".btn-done");let count=1;const orderModal=()=>elHeaderOrderModal.classList.toggle("hide");elHamburgeMenubtn.addEventListener("click",()=>{elBody.classList.toggle("sitenav__list-on"),elBody.classList.toggle("overflow")}),elHeaderBtn.addEventListener("click",()=>{elBody.classList.toggle("sitenav__list-on"),orderModal(),elOverlay.classList.remove("hide")}),elHeaderTabletBtn.addEventListener("click",()=>{orderModal(),elOverlay.classList.remove("hide")}),elHeaderOrderModal.addEventListener("click",e=>{e.target.matches(".form-close")&&(orderModal(),elOverlay.classList.add("hide"))});const increment=()=>(count+=1,elFormDecrementButton.removeAttribute("disabled"),elFormProductCount.textContent=count),decrement=()=>{if(elFormProductCount>1||count>1)return count-=1,elFormProductCount.textContent=count;(elFormProductCount<=1||count<=1)&&elFormDecrementButton.setAttribute("disabled","button")};elFormIncrementButton.addEventListener("click",()=>{increment()}),elFormDecrementButton.addEventListener("click",()=>{decrement()}),elForm.addEventListener("submit",e=>{e.preventDefault();let t={name:elFormInputName.value,number:elFormInputTel.value,productName:elFormSelect.value,count:elFormProductCount.textContent};axios.post("http://localhost:1212/api/orders",t).then(e=>{e.status>=200&&e.status<210&&elHeaderOrderSuccessModal.classList.toggle("hide")}).catch(e=>{Toastify({text:e.response.data.message,duration:5e3,close:!0,position:"right",backgroundColor:"red",stopOnFocus:!0,onClick:function(){}}).showToast()})}),elHeaderOrderSuccessModalBtn.addEventListener("click",e=>{elHeaderOrderSuccessModal.classList.toggle("hide"),orderModal(),elOverlay.classList.add("hide"),elFormInputName.value="",elFormInputTel.value="",elFormSelect.value,elFormProductCount.textContent=count});const showSecondApp=()=>{setTimeout(()=>{elSecondAppBox.classList.remove("hide"),elOverlay.classList.remove("hide"),elSecondAppBox.addEventListener("click",e=>{e.target.textContent===cancelSecondApp.innerHTML&&(elOverlay.classList.add("hide"),closeBox())})},7e3)},closeBox=()=>elSecondAppBox.classList.add("hide");async function getHeroCarousels(){axios.get(`${baseURL}/carousel`).then(e=>{e.status>=200&&e.status<210&&(showSecondApp(),e.data.forEach((e,t)=>{heroCarouselWrapper.innerHTML="";let r=document.createElement("div");r.classList.add("swiper-slide"),r.innerHTML=`
					<div class="swip">
					<div class="swip_left">
						<h2 class="swip_title">${e.title}</h2>
						<a class="category__btn" href="#bottom">Kategoriyalar</a>
					</div>
					<div class="swip_right">
						<img
						src=${baseImgUrl}/carousel/${e.image}
						alt="${e.title}"
						/>
					</div>
				</div>
					`,fragment.appendChild(r)}),heroCarouselWrapper.appendChild(fragment),new Swiper(".mySwiper",{pagination:{el:".hero__pagination",clickable:!0,type:"progressbar"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},autoplay:{delay:3500,disableOnInteraction:!1},loop:!0,watchSlidesProgress:!0}))}).catch(e=>{Toastify({text:e?.message,duration:5e3,close:!0,position:"right",backgroundColor:"red",stopOnFocus:!0,onClick:function(){}}).showToast()})}getHeroCarousels();const cu=new counterUp({duration:1500,prepend:"",append:"",selector:".countup",start:0,end:7,intvalues:!0}),customersCount=new counterUp({duration:1e3,prepend:"",append:"k+",selector:".customers",start:0,end:10,interval:10,intvalues:!0}),yearCount=new counterUp({duration:1500,prepend:"",append:"",selector:".year",start:0,end:10,intvalues:!0}),dayCount=new counterUp({duration:1500,prepend:"",append:"",selector:".day",start:0,end:3,intvalues:!0});async function getCategories(){try{let e=await fetch(`${baseURL}/products`),t=await e.json();t?.categories?.forEach(e=>{elCategoryLinksList.innerHTML="";let t=elTemplate.cloneNode(!0);t.querySelector(".products_links-link").textContent=e.category;let r=t.querySelector(".products_links-link");r.innerHTML==isActive?r.classList.add("products_links-link--active"):r.classList.remove("products_links-link--active"),fragment.appendChild(t)}),elCategoryLinksList.appendChild(fragment)}catch{}}async function getProducts(){try{let e=await fetch(`${baseURL}/products`);if(e.status>=200&&e.status<210){let t=await e.json(),r=t.products;console.log(r),r?.forEach((e,t)=>{elProducts.innerHTML="",elDiscounts.innerHTML="";let l=document.createElement("option");l.textContent=e.name,l.value=e.name,elFormSelect.appendChild(l);let s=e.product_images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(","),o=elProductsTemplate.cloneNode(!0);o.querySelector(".products__zoom-btn").dataset.productIndex=e.id,o.querySelector(".products__zoom-btn").addEventListener("click",e=>{getSingleProduct(e.target.dataset.productIndex,r)}),o.querySelector(".products_category_type").textContent=e.category,o.querySelector(".products__imgg").src=`${baseImgUrl}/products/${s[0]}`,o.querySelector(".products_right-title").textContent=e?.name,o.querySelector(".weight").textContent=e.weight,o.querySelector(".warranty").textContent=e.warranty,o.querySelector(".size").textContent=e.size,o.querySelector(".capacity").textContent=e.capacity,o.querySelector(".new").textContent="0"!==e.status?"YANGI MAHSULOT":"","0"!==e.status&&o.querySelector(".new").classList.add("products_new-btn"),o.querySelector(".products_right-desc").textContent=e.body,o.querySelector(".products_right-price-value").textContent=e.cost,fragment.appendChild(o)});t?.products.filter(e=>null!==e.new_cost).forEach((e,t)=>{elDiscountTitle.classList.remove("hide");let r=elDiscountProductsTemplate.cloneNode(!0);r.querySelector(".products__imgg").src=`${baseImgUrl}/products/${e?.product_images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",")[0]}`,r.querySelector(".products__zoom-img").src=`${baseImgUrl}/products/${e?.product_images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",")[0]}`,r.querySelector(".products_right-title").textContent=e?.name,r.querySelector(".products_right-desc").textContent=e.body,r.querySelector(".weight").textContent=e.weight,r.querySelector(".warranty").textContent=e.warranty,r.querySelector(".size").textContent=e.size,r.querySelector(".capacity").textContent=e.capacity,r.querySelector(".old_price").textContent=e.cost,r.querySelector(".new_price").textContent=e.new_cost,discountFragment.appendChild(r)}),elProducts.appendChild(fragment),elDiscounts.appendChild(discountFragment),readyAllEvents()}}catch(l){console.error(l)}}async function readyAllEvents(){let e=document.querySelectorAll(".products__zoom-btn"),t=document.querySelector(".products__zoom-selected-box"),r=document.querySelector(".products__zoom-selected"),l=document.querySelectorAll(".products__zoom-item"),s=document.querySelectorAll(".products__zoom-img"),o=document.querySelector(".products__zoom-close"),a=document.querySelectorAll(".products_right-order"),c=document.querySelector(".overlay"),n=document.getElementsByClassName("prod_item"),d=document.querySelectorAll(".products_links-link");e.forEach(e=>{e.addEventListener("click",e=>{t.classList.remove("hide"),c.classList.remove("hide")})}),o.addEventListener("click",()=>{t.classList.add("hide"),c.classList.add("hide")}),s.forEach(e=>{e.addEventListener("click",t=>{r.src=t.target.src,l.forEach(e=>{e.classList.remove("mod")}),e.parentElement.classList.add("mod")})}),a.forEach(e=>{e.addEventListener("click",()=>{c.classList.toggle("hide"),orderModal()})});let i=()=>{d.forEach(e=>{e.innerHTML==isActive?e.classList.add("products_links-link--active"):e.classList.remove("products_links-link--active")})};elCategoryLinksList.addEventListener("click",e=>{e.preventDefault();let t=e.target;t.matches(".products_links-link")&&("Barchasi"!==t.textContent?(isActive=t.innerHTML,i(),function e(t,r){for(let l=0;l<n.length;l++){let s=n[l].getElementsByClassName(t)[0].innerHTML;s.match(r.target.textContent)?n[l].style.display="block":n[l].style.display="none"}}("products_category_type",e)):function e(){for(let t=0;t<n.length;t++)n[t].style.display="block"}())})}cu.start(),customersCount.start(),yearCount.start(),dayCount.start(),getCategories(),getProducts();const getSingleProduct=(e,t)=>{let r=document.querySelector(".products__zoom-selected"),l=document.querySelectorAll(".products__zoom-img"),s=t.find(t=>t.id===Number(e)),o=s.product_images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",");r.src=`${baseImgUrl}/products/${o[0]}`,o.forEach((e,t)=>{l[t].src=`${baseImgUrl}/products/${e}`})},addressSwiper=new Swiper(".addressSwiper",{pagination:{clickable:!0},autoplay:{delay:7500}}),renderAddressSwiper=async()=>{try{let e=await fetch(`${baseURL}/address`),t=await e.json();t?.forEach((e,t)=>{addressWrapper.innerHTML="";let r=document.createElement("div");r.classList.add("swiper-slide"),r.innerHTML=`
							<div class="address__swiper-left">
								<h2 class="address__title">Manzilimiz</h2>
								<div class="address__box">
									<h3 class="address__location">
										${e.location}
									</h3>
									<p class="address__destination">
										${e.destination}
									</p>
									<a class="address__geolocation" href="https://www.google.com/maps/search/${e.location}" target=_blank>Geolokatsiya</a>
								</div>
							</div>
							<div class="address__swiper-right">
							
								<div class="swiper addressSwiperInner">
									<div class="swiper-wrapper">
										<div class="swiper-slide addressSlide">
											<img
											src=${baseImgUrl}/address/${e?.images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",")[0]}
											alt=""
											/>
										</div>
										<div class="swiper-slide addressSlide">
											<img
											src=${baseImgUrl}/address/${e?.images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",")[1]}
											alt=""
											/>
										</div>
										<div class="swiper-slide addressSlide">
											<img
											src=${baseImgUrl}/address/${e?.images.replaceAll("[","").replaceAll("]","").replaceAll('"',"").split(",")[2]}
											alt=""
											/>
										</div>
										
									</div>
									<div
									class="address__pagination"
									></div>
								</div>
							</div>
						`,fragment.appendChild(r)}),addressWrapper.appendChild(fragment),new Swiper(".addressSwiperInner",{pagination:{el:".address__pagination",clickable:!0,type:"progressbar"},autoplay:{delay:2e3},observer:!0,observeParents:!0,watchSlidesProgress:!0})}catch(r){console.log(r)}};renderAddressSwiper();const showSuccessApellation=()=>{elInterestingWrap.classList.toggle("hide"),elInterestingSuccess.classList.toggle("hide"),setTimeout(()=>{elInterestingSuccess.classList.toggle("hide"),elInterestingWrap.classList.toggle("hide")},2500)};elInterestingForm.addEventListener("submit",e=>{e.preventDefault();let t={number:elFormInterestingInput.value};axios.post(`${baseURL}/contact`,t).then(e=>{e.status>=200&&e.status<210&&(showSuccessApellation(),elFormInterestingInput.value="")}).catch(e=>{Toastify({text:e.response.data.message,duration:5e3,close:!0,position:"right",backgroundColor:"red",stopOnFocus:!0,onClick:function(){}}).showToast()})});let words=["O'","G'","Sh","Ch"],me=[{first_name:"Shahobiddin",last_name:"Faxritdinov"},],firstDoubleLetter=me[0]?.first_name?.charAt(0)?.concat(me[0]?.first_name?.charAt(1)),lastDoubleLetter=me[0]?.last_name?.charAt(0)?.concat(me[0]?.last_name?.charAt(1)),fN,lN;try{fN=me[0]?.first_name?me[0]?.first_name?.charAt(0):"",lN=me[0]?.last_name?me[0]?.last_name?.charAt(0):""}catch{}words.forEach(e=>{e===firstDoubleLetter&&(fN=e),e===lastDoubleLetter&&(lN=e)}),console.log(fN,lN);